!function(e,t){function n(e,t){var n,a=0;for(var r in e)a==t&&(n=r),a++;return n}function a(e,n){var a=this;return"INPUT"!=e[0].nodeName?void console.error(r+" needs an input to be bound to!"):(a.settings=t.extend({},Fancy.settings[r],n),a.visible=!1,a.calculate={day:864e5,hour:36e5,minute:6e4,second:1e3},a.element=e,a.version=i,a.name=r,a.enable=function(){},a.disable=function(){},a.today=a.decode(a.encode(new Date)),a.current=a.decode(a.element.val()?a.element.val():a.encode(new Date)),a.selected=a.decode(a.element.val()),a.init(),a)}Fancy.require({jQuery:!1,Fancy:"1.1.0"});var r="FancyDate",i="2.1.1",l=!1;a.api=a.prototype={},a.api.version=i,a.api.name=r,a.api.init=function(){var e=this;l||(l=!0,Fancy.version(e)),this.html={wrapper:t("<div/>",{id:e.name+"-wrapper"}),dialog:t("<div/>",{id:e.name+"-dialog"}).attr("onselectstart",function(){return!1}),inner:t("<div/>",{id:e.name+"-inner"}),previous:t("<div/>",{id:e.name+"-previous","class":e.name+"-button"}),previousArrow:t("<div/>",{"class":e.name+"-arrow"}),next:t("<div/>",{id:e.name+"-next","class":e.name+"-button"}),nextArrow:t("<div/>",{"class":e.name+"-arrow"}),title:t("<div/>",{id:e.name+"-title"}),year:t("<span/>",{id:e.name+"-year"}),yearChanger:t("<div/>",{id:e.name+"-year-changer"}),month:t("<span/>",{id:e.name+"-month"}),header:t("<div/>",{id:e.name+"-header"}),body:t("<div/>",{id:e.name+"-body"}),footer:t("<div/>",{id:e.name+"-footer"}),close:t("<div/>",{id:e.name+"-close","class":e.name+"-button",html:e.translate("button","close")}),today:t("<div/>",{id:e.name+"-today","class":e.name+"-button",html:e.translate("button","today")}),clear:t("<div/>",{id:e.name+"-clear","class":e.name+"-button",html:e.translate("button","clear")}),calendar:t("<div/>",{id:e.name+"-calendar"}),days:[],rows:[]},e.element.on("focus",function(){!e.visible&&e.settings.query(e.element)&&e.show()}).on("blur."+r,function(t){setTimeout(function(){e.html.dialog.is(":visible")&&!t.relatedTarget?e.element[0].focus():e.close()},1)}).addClass(e.name+"-element").data(e.name,e)},a.api.show=function(){function e(){n.html.dialog.show(),n.visible=!0,n.create(),n.settings.onShow.call(n)}var n=this;return n.element[0].readOnly||n.element[0].disabled||(this.settings.free?(t("body").append(n.html.wrapper).addClass(n.name),n.html.wrapper.append(n.html.dialog)):t("body").append(n.html.dialog).addClass(n.name),n.html.dialog.append(n.html.inner),n.html.inner.append(n.html.header).append(n.html.body).append(n.html.footer),n.html.header.append(n.html.previous.append(n.html.previousArrow)).append(n.html.title).append(n.html.next.append(n.html.nextArrow)),n.html.body.html(n.html.calendar),n.html.footer.html(n.html.close).append(n.html.today).append(n.html.clear),n.html.dialog.hide(),n.settings.free?n.html.wrapper.unbind("."+r).on("click."+r,function(e){t(e.target).is(n.html.wrapper)&&n.close()}):t(document).unbind("."+r).on("click."+r,function(e){t(e.target).is(n.element)||t(e.target).closest("#"+r+"-dialog").length||t(e.target).is("#"+r+"-dialog")||n.close()}),n.settings.animated?setTimeout(function(){e(),n.html.dialog.addClass("show").removeClass("hide")}):e()),n},a.api.close=function(){function e(){n.html.wrapper.remove(),n.html.dialog.remove(),n.html.calendar.children().remove(),n.html.header.children().remove(),n.html.title.children().remove(),n.element.unbind("."+r+":prevent"),n.element[0].blur(),n.visible=!1,n.settings.onClose.call(n),t("body").removeClass(n.name)}var n=this;return n.html.dialog.hasClass("hide")||(n.element.unbind("."+n.name+":prevent"),n.settings.animated?(setTimeout(e,300),n.html.dialog.addClass("hide").removeClass("show")):e()),n},a.api.update=function(){var e=this;e.html.calendar.html(""),e.html.title.html(e.html.month.html(e.translate("month",e.current.getMonth()))).append(e.html.year.html(e.current.getFullYear())),e.create()},a.api.create=function(){function n(e,t){e.on("click",function(){r.setYear(t)})}function a(e){var n=t("<div/>",{id:this.name+"-rowh-"+e,"class":this.name+"-rowh",html:this.translate("day",e)});h.append(n)}var r=this,i=new Date(r.current.getFullYear(),r.current.getMonth(),1),l=0,o=0;if(r.html.title.append(r.html.month.html(r.translate("month",r.current.getMonth()))).append(r.html.year.html(r.current.getFullYear())),r.html.title.append(r.html.yearChanger),r.html.yearChanger.children().remove(),1!=i.getDay()&&0!=i.getDay()){var s=new Date(r.current.getFullYear(),r.current.getMonth(),0);i=new Date(r.current.getFullYear(),r.current.getMonth()-1,s.getDate()-i.getDay()+2)}else if(0==i.getDay()){var s=new Date(r.current.getFullYear(),r.current.getMonth(),0);i=new Date(r.current.getFullYear(),r.current.getMonth()-1,s.getDate()-5)}else{var s=new Date(r.current.getFullYear(),r.current.getMonth(),0);i=new Date(r.current.getFullYear(),r.current.getMonth()-1,s.getDate()-6)}var d=t("<ul/>");r.html.yearChanger.append(d);for(var c=r.current.getFullYear()+50;c>r.current.getFullYear()-50;c--){var m=t("<li/>",{html:r.translate("month",r.current.getMonth())+" "+c});d.append(m),n(m,c)}if(r.html.days=[],r.html.rows=[],r.html.calendar.children().remove(),this.settings.showWeekHeader){var h=t("<div/>",{id:this.name+"-rowh"});this.html.calendar.append(h),a.call(this,"mo"),a.call(this,"tu"),a.call(this,"we"),a.call(this,"th"),a.call(this,"fr"),a.call(this,"sa"),a.call(this,"su")}for(;6>l;){l++,r.html.rows[l]=t("<div/>",{id:r.name+".row-"+l,"class":r.name+"-row"}),r.html.calendar.append(r.html.rows[l]);for(var u=0;7>u;){u++,o++;var g=t("<div/>",{id:r.name+"-day-"+o,"class":r.name+"-day "+r.name+"-button",html:i.getDate()}).data("date",i);i.getMonth()!=r.current.getMonth()&&g.addClass(r.name+"-day-extern"),i.getMonth()==r.today.getMonth()&&i.getDate()==r.today.getDate()&&i.getFullYear()==r.today.getFullYear()&&g.addClass(r.name+"-day-today"),r.selected&&i.getTime()===r.selected.getTime()&&g.addClass(r.name+"-active"),i=new Date(i.getTime()+r.calculate.day),r.html.days.push(g),r.html.rows[l].append(g)}}var p=r.html.body.outerWidth()/7;return t(r.html.days).each(function(){t(this).css({width:parseInt(p+1-parseInt(t(this).css("paddingLeft"))-parseInt(t(this).css("paddingRight")))})}),t("."+this.name+"-rowh").each(function(){t(this).css({width:parseInt(p+1-parseInt(t(this).css("paddingLeft"))-parseInt(t(this).css("paddingRight")))})}),this.html.dialog.css(this.settings.free?{marginTop:(e.innerHeight-this.html.dialog.outerHeight())/2,marginLeft:(e.innerWidth-this.html.dialog.outerWidth())/2}:{position:"absolute",left:r.element.offset().left,top:r.element.offset().top+r.element.outerHeight()}),r.addEventListener(),r},a.api.addEventListener=function(){for(var e=this,n=0;n<e.html.days.length;n++)t(e.html.days[n]).on("click",function(){e.select(new Date(t(this).data("date")))});return e.element.on("keydown",function(t){setTimeout(function(){9===(t.which|t.keyCode)&&e.close()},2)}),e.html.clear.unbind("click").on("click",function(){e.element.val(""),e.selected=!1,e.current=e.today,e.close()}),e.html.dialog.unbind("."+e.name).on("selectstart."+e.name,function(e){"use strict";e.preventDefault()}),e.html.close.unbind("click").on("click",function(){e.close()}),e.html.today.unbind("click").on("click",function(){e.select(e.today),e.current=e.today,e.close()}),e.html.next.unbind("click").on("click",function(){e.current=new Date(e.current.getFullYear(),e.current.getMonth()+1,1),e.update()}),e.html.previous.unbind("click").on("click",function(){e.current=new Date(e.current.getFullYear(),e.current.getMonth()-1,1),e.update()}),e.html.wrapper.unbind("click").on("click",function(n){t(n.target).is(e.html.wrapper)&&e.close()}),e.element.unbind("."+r).on("input."+r+" paste."+r,function(e){e.preventDefault(),e.stopPropagation()}),e},a.api.select=function(e){var t=this;return t.element.val(t.encode(e)),t.selected=e,t.current=e,"function"==typeof t.settings.onSelect&&t.settings.onSelect(t.selected),t.close(),t},a.api.encode=function(e,t){var n=this;return t=t||n.settings.format,t.replace("dd",e.getDate()<10?"0"+e.getDate():e.getDate()).replace("mm",e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1).replace("yyyy",e.getFullYear())},a.api.decode=function(e){var t=this,n={d:parseInt(e.substring(t.settings.format.indexOf("dd"),t.settings.format.indexOf("dd")+2)),m:parseInt(e.substring(t.settings.format.indexOf("mm"),t.settings.format.indexOf("mm")+2))-1,y:parseInt(e.substring(t.settings.format.indexOf("yyyy"),t.settings.format.indexOf("yyyy")+4))};return new Date(n.y,n.m,n.d)},a.api.translate=function(e,t){var r=a.translation[navigator.language]?navigator.language:"en",i=a.translation[r][e];return"undefined"==typeof i[0]&&"number"==typeof t&&(t=n(i,t)),i&&(i=a.translation[r][e][t]),i},a.api.setYear=function(e){this.current.setYear(e),this.create()},Fancy.settings[r]={format:"dd.mm.yyyy",animated:!0,onShow:function(){},onClose:function(){},query:function(){return!0},free:!0,showWeekHeader:!0},a.translation={de:{month:["Januar","Februar","M&auml;rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],day:{mon:"Montag",mo:"Mo",tue:"Dienstag",tu:"Di",wen:"Mittwoch",we:"Mi",thu:"Donnerstag",th:"Do",fri:"Freitag",fr:"Fr",sat:"Samstag",sa:"Sa",sun:"Sonntag",su:"So"},button:{close:"Schlie&szlig;en",today:"Heute",clear:"L&ouml;schen"}},en:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],day:{mon:"Mon",tue:"Tue",wen:"Wed",thu:"Thu",fri:"Fri",sat:"Sat",sun:"Sun"},button:{close:"Close",today:"Today",clear:"Clear"}}},Fancy.date=!0,Fancy.api.date=function(e){return this.set(a,e)}}(window,jQuery);