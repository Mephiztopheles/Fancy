!function(e){function t(e,t){return e+"."+t}function n(i,o){var c=e(i),r=this;return r.id=a,r.name=s,r.version=version,r.element=c,r.defaultValue=r.value=r.element.val(),r.settings=e.extend({multiple:r.element.attr("multiple")||r.element.hasClass("multiple"),search:r.element.attr("search")||r.element.hasClass("search"),selectedText:!1,create:r.element.attr("create")||r.element.hasClass("create")},o),l||(Fancy.version(r),l=!0,e(document).on(t("click",r.name),function(t){var a=!e(t.target).closest("."+r.name).length;a=a||e(t.target).hasClass("."+r.name+"-option"),e(t.target).closest("."+r.name).hasClass(r.name+"-multiple")&&(a=a&&!e(t.target).hasCLass("."+r.name+"-option")),a=a||e(t.target).hasClass(r.name+"-option-reset"),a&&e("."+r.name).each(function(){n.api.close(this)})})),r.createClient(),r.buildOptions(),r.buildFilter(),r.applySettings(),r.addEventListener(),r.select(r.element.val()),"function"==typeof Fancy.scroll&&(r.scroller=new Fancy.scroll(r.client.options)),r.element.data(r.name,r),r.client.data(r.name,r),a++,r}Fancy.require({jQuery:!1,Fancy:"1.1.0"});var a=1,s="FancySelect",i="2.1.0",l=!1;n.api=n.prototype={},n.api.version=i,n.api.name=s,n.api.open=function(e){var t=Fancy(e).get(s)||this;if(t.length)for(var n in t)t[n].client.addClass(t[n].name+"-open"),t[n].scroller&&t[n].scroller.resize();else t.client.addClass(t.name+"-open"),t.scroller&&t.scroller.resize();return t},n.api.close=function(e){var t=Fancy(e).get(s)||this;if(t.length)for(var n in t)t[n].client.removeClass(t[n].name+"-open");else t.client.removeClass(t.name+"-open");return t},n.api.createClient=function(){var t=this;t.client=e("<div/>",{id:t.name+"-box-"+t.id,"class":t.name}),t.client.selected=e("<div/>",{id:t.name+"-selected-"+t.id,"class":t.name+"-selected"}),t.client.options=e("<div/>",{id:t.name+"-options-"+t.id,"class":t.name+"-options"}),t.element.after(t.client),t.client.prepend(t.element),t.element.addClass(t.name+"-element"),t.client.prepend(t.client.selected).append(t.client.options)},n.api.buildOptions=function(){var t=this;t.options=[],t.search=[];var n,a=1,s=!1;return t.client.options.html(""),t.element.children().each(function(i){var l=e(this);i++;var o=e("<div/>",{id:t.name+"-"+t.id+"-option-"+i}),c=e("<span/>",{id:t.name+"-"+t.id+"-option-text-"+i,"class":t.name+"-option-text",html:l.text()});if(o.append(c),l.data("description")){var r=e("<span/>",{id:t.name+"-"+t.id+"-option-description-"+i,"class":t.name+"-option-description",html:l.data("description")});o.append(r)}e.each(l.data(),function(e,t){o.data(e,t)});var p=l.prop("value");if(p||(p="",o.addClass(t.name+"-option-reset")),o.data("value",p).attr("unselectable","on").css("user-select","none").on("selectstart",!1),o.addClass(t.name+"-option"),"OPTGROUP"!=l.parent()[0].nodeName)t.search.push([o.text().toLowerCase(),o.data("search")?o.data("search").toLowerCase():"",o]),t.client.options.append(o),t.options.push(o),s=!1;else{if(!l.parent().is(s)){n=e("<div/>",{id:t.name+"-"+t.id+"-optgroup-"+a}),n.addClass(t.name+"-optgroup");var d=e("<div/>",{id:t.name+"-"+t.id+"-opttitle-"+a,html:l.parent().attr("label")});d.addClass(t.name+"-opttitle"),n.append(d),t.client.options.append(n),s=l.parent()}n.append(o),a++}}),t.settings.fallback||(t.settings.fallback=t.options[0].hasClass(t.name+"-option-reset")?t.options[0].data("text")||t.options[0].html():t.element.attr("placeholder")),t},n.api.buildFilter=function(){var t=this;return t.settings.search&&!t.settings.create?(t.input=e("<input/>",{type:"text","class":t.name+"-input"}),t.input.clear=e("<div/>",{style:"position: absolute; display: none;","class":t.name+"-input-clear",html:"x"}),t.client.options.prepend(t.input),t.input.after(t.input.clear),t.input.on("input",function(){if(t.input.val().length>0)for(var e in t.search){var n=t.search[e];t.input.clear.show();var a,s;"strict"==t.settings.search?(a=0==n[0].indexOf(t.input.val().toLowerCase()),s=0==n[1].indexOf(t.input.val().toLowerCase())):(a=n[0].indexOf(t.input.val().toLowerCase())>=0,s=n[1].indexOf(t.input.val().toLowerCase())>=0),a||s?n[2].show():n[2].hide()}else{t.input.clear.hide();for(var e in t.search)t.search[e][2].show()}"function"==typeof Fancy.scroll&&t.scroller.enable().resize()}),t.input.clear.on("click",function(){t.input.val(""),t.input.trigger("input")})):t.settings.create&&(t.input=e("<input/>",{type:"text","class":t.name+"-input"}),t.client.options.prepend(t.input),t.input.on("input",function(){t.input.val().length>0?t.element.attr("value",input.val()).trigger("change"):e("#"+t.name+"-"+a+"-option-1").trigger("click")})),this},n.api.applySettings=function(){this.settings.multiple&&this.client.addClass(this.name+"-multiple")},n.api.addEventListener=function(){function a(){s.client.hasClass(s.name+"-open")?s.close():(e("."+s.name).each(function(){n.api.close(e(this))}),s.open())}var s=this;s.client.on(t("click",s.name),function(t){var n=e(t.target),i=n.hasClass(s.name+"-selected")||n.parent().hasClass(s.name+"-selected"),l=n.hasClass(s.name+"-option")||n.parent().hasClass(s.name+"-option");if(i)a();else if(l)if(n=n.hasClass(s.name+"-option")?n:n.parent(),s.settings.multiple){var o=[],c=n.hasClass(s.name+"-option-reset")||n.parent().hasClass(s.name+"-option-reset"),r=s.client.options.children().first().hasClass("selected")&&s.client.options.children().first().hasClass(s.name+"-option-reset");if(n.hasClass("selected"))if(c)s.close();else{n.removeClass("selected");var p=[],d=s.client.options.children(".selected");d.each(function(){p.push(e(this).data("value"))}),s.element.val(p),s.element.trigger("change")}else{n.addClass("selected"),!c&&r||r?s.client.options.children().first().removeClass("selected"):c&&(s.client.options.children(".selected").removeClass("selected"),s.client.options.children().first().addClass("selected"),s.close());var p=[],d=s.client.options.children(".selected");d.each(function(){p.push(e(this).data("value"))});var m=p!=s.value;s.element.val(p),m&&s.element.trigger("change")}}else{var o=n.data("value"),m=o!=s.value;s.select(o),m&&s.element.trigger("change"),s.close()}}),s.client.on(t("selectstart",s.name),function(e){e.preventDefault()}),s.element.on(t("change",s.name),function(){s.select(s.element.val())}).on(s.name+":change",function(){s.select(s.element.val())})},n.api.select=function(t,n){var a=Fancy(n).get(s)||this,i="",l="";if(a.settings.multiple)if("string"==typeof t&&(t=t.split(",")),a.client.options.children(".selected").removeClass("selected"),t)e.each(t,function(e,t){for(var n in a.options){var s=a.options[n];s.data("value")==t&&(s.addClass("selected"),i+=(e>0?", ":"")+(s.data("text")||s.html()),l+=(e>0?", ":"")+(s.data("text")||s.children()[0].innerHTML))}});else{var o=a.options[0];o.hasClass(a.name+"-option-reset")&&(o.addClass("selected"),i=o.data("text")||o.html(),l=o.data("text")||o.children()[0].innerHTML)}else if(a.settings.create)for(var c in a.options){var r=a.options[c];t==a.client.options.children().first().data("value")||null==t||""==t?r.data("value")==r.data("text")?(r.addClass("selected"),i=r.data("text")||r.html(),l=r.data("text")||r.children()[0].innerHTML):r.removeClass("selected"):r.data("value")==text?(r.addClass("selected"),i=r.data("text")||r.html(),l=r.data("text")||r.children()[0].innerHTML):r.removeClass("selected")}else for(var c in a.options){var r=a.options[c];r.data("value")==t?(r.addClass("selected"),i=r.data("text")||r.html(),l=r.data("text")||r.children()[0].innerHTML):r.removeClass("selected")}l||(l=a.settings.fallback,i=a.settings.fallback),a.client.options.children("."+a.name+"-option-reset").data("text")!=l&&e(a.settings.selectedtext).html(l),a.client.selected.html(i).attr("title",l),a.element.val(t),a.value=t},Fancy.select=!0,Fancy.api.select=function(e){return this.set(FancySwipe,e)}}(jQuery);