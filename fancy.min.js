(function( c ) {
    if( typeof window.Fancy === "function" ) {
        console.error( "Error: tried to load Fancy more than once" );
        return
    }
    if( typeof jQuery != "function" ) {
        console.error( "jQuery * > 1.7 required" );
        return
    }
    var a = navigator.userAgent.toLowerCase();

    function g( j ) {
        if( this == window ) {return new g( j )}
        this.element = c( j );
        this.name = "Fancy"
    }

    g.versionControl = true;
    g.preventSelect = function b( j ) {return j.on( "selectstart", false ).attr( "unselectable", "on" ).css( "userSelect", "none" )};
    g.findByAnd = function( m, l, j ) {
        function k() {
            var p = true, q = 0;
            while( q < this.length ) {
                p = true;
                for( var o in l ) {
                    if( l.hasOwnProperty( o ) ) {
                        if( (o.toLowerCase().indexOf( "date" ) >= 0 ? new Date( g.getKey( this[ q ], o ) ).getTime() : g.getKey( this[ q ], o )) != (o.toLowerCase().indexOf( "date" ) >= 0 ? new Date( l[ o ] ).getTime() : l[ o ]) ) {
                            p = false;
                            break
                        }
                    }
                }
                if( p == true ) {
                    p = q;
                    break
                }
                q++
            }
            p = (p === true || p === false) ? null : p;
            var n = p === null ? null : this[ p ];
            return j ? { index: p, result: n } : n
        }

        return k.apply( m )
    };
    g.findAllBy = function( j, l ) {
        function k() {
            var n = [], m = true;
            this.forEach( function( p ) {
                m = true;
                for( var o in l ) {if( l.hasOwnProperty( o ) ) {if( (o.toLowerCase().indexOf( "date" ) >= 0 ? new Date( g.getKey( this, o ) ).getTime() : g.getKey( this, o )) != (o.toLowerCase().indexOf( "date" ) >= 0 ? new Date( l[ o ] ).getTime() : l[ o ]) ) {m = false}}}
                if( m == true ) {n.push( p )}
            } );
            return n
        }

        return k.apply( j )
    };
    g.JSONvalid = function h( j ) {return j && /^[\],:{}\s]*$/.test( j.replace( /\\["\\\/bfnrtu]/g, "@" ).replace( /"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]" ).replace( /(?:^|:|,)(?:\s*\[)+/g, "" ) )};
    g.isObject = function i( j ) {return {}.toString.apply( j ) === "[object Object]"};
    g.isArray = function e( j ) {return Object.prototype.toString.call( j ) === "[object Array]"};
    g.capitalize = function f( j ) {return j[ 0 ].toUpperCase() + j.slice( 1 )};
    g.decapitalize = function d( j ) {return j[ 0 ].toLowerCase() + j.slice( 1 )};
    g.api = g.prototype = { version: "1.0.7", name: "Fancy" };
    g.isOpera = !!window.opera || navigator.userAgent.indexOf( " OPR/" ) >= 0;
    g.isFirefox = typeof InstallTrigger !== "undefined";
    g.isSafari = Object.prototype.toString.call( window.HTMLElement ).indexOf( "Constructor" ) > 0;
    g.isChrome = !!window.chrome && !this.isOpera;
    g.isIE = !!document.documentMode;
    g.apple = a.indexOf( "iphone" ) >= 0 || a.indexOf( "ipad" ) >= 0 || a.indexOf( "ipod" ) > 0;
    g.mobile = a.indexOf( "mobile" ) >= 0 || a.indexOf( "android" ) >= 0 || g.apple;
    g.versionControl = true;
    g.version = function( j ) {
        if( g.versionControl ) {
            if( g.isChrome ) {console.log( "%cThis page is using %c" + j.name + "%c\r\n Copyright \u00a9 %cMarkus Ahrweiler\r\n %cVersion: %c" + j.version, "color: #000", "color: #8E0000", "color: #000", "color: #49A54F", "color: #000", "color: blue" )} else {console.log( "This page is using " + j.name + "\r\n Copyright\u00a9 Markus Ahrweiler\r\n Version: " + j.version )}
            c.ajax( {
                url    : "http://version.mephiztopheles.wtf/",
                data   : { plugin: j.name },
                type   : "POST",
                global : false,
                success: function( k ) {if( k ) {if( g.compareversion( k, j.version ) ) {if( g.isChrome ) {console.warn( "%cYou are using an older version of %c" + j.name + ". %cThe newest version is: " + k, "color: #000", "color: #8E0000", "color: #000" )} else {console.warn( "You are using an older version of " + j.name + ". The newest version is: " + k )}}} else {if( g.isChrome ) {console.warn( "Couldn't retrieve version control information for %c" + j.name + "%c!", "color: #8E0000", "color. #000" )} else {console.warn( "Couldn't retrieve version control information for " + j.name + "!" )}}}
            } )
        }
    };
    g.require = function( j ) {
        c( function() {
            for( var l in j ) {
                if( j.hasOwnProperty( l ) ) {
                    var k;
                    if( l.indexOf( "Fancy." ) == 0 ) {k = g.getKey( window, l )} else {k = window[ l ].prototype.version || (l == "jQuery" ? jQuery.prototype.jquery : false)}
                    if( typeof window[ l ] == "undefined" || (k && j[ l ] && g.compareversion( j[ l ], k )) ) {throw"Error: " + l + " " + (j[ l ] ? j[ l ] + " " : "") + "is required" + (k ? ", got " + k : "")}
                }
            }
        } )
    };
    g.compareversion = function( k, j ) {
        var m = [ parseInt( k.split( "." )[ 0 ] ), parseInt( k.split( "." )[ 1 ] ), parseInt( k.split( "." )[ 2 ] ) ], l = [ parseInt( j.split( "." )[ 0 ] ), parseInt( j.split( "." )[ 1 ] ), parseInt( j.split( "." )[ 2 ] ) ];
        return m[ 0 ] > l[ 0 ] || (m[ 0 ] == l[ 0 ] && m[ 1 ] > l[ 1 ]) || (m[ 1 ] == l[ 1 ] && m[ 2 ] > l[ 2 ])
    };
    g.check = function( o, u ) {
        for( var m in u ) {
            if( u.hasOwnProperty( m ) ) {
                var q, l, k, n;
                if( u[ m ].type ) {
                    q = true;
                    l = u[ m ].type.split( "|" );
                    for( k = 0; k < l.length; k++ ) {
                        if( q ) {
                            n = o[ m ] instanceof window[ l[ k ] ] || typeof o[ m ] === l[ k ].toLowerCase();
                            if( n ) {q = false}
                        }
                    }
                    if( q ) {throw"Error: Expected type " + l.join( " or " ) + " but got " + f( typeof o[ m ] ) + " for " + m}
                }
                if( u[ m ].required ) {
                    q = false;
                    switch( typeof o[ m ] ) {
                        case"string":
                            if( !o[ m ] ) {q = true}
                            break;
                        case"object":
                            if( o[ m ] === null ) {q = true} else {if( !Object.keys( o[ m ] ).length ) {q = true}}
                            break;
                        case"undefined":
                            q = true;
                            break
                    }
                    if( q ) {throw"Error: " + m + " is required"}
                }
                if( u[ m ].types && o[ m ] && o[ m ].length ) {
                    for( var j = 0; j < o[ m ].length; j++ ) {
                        l = u[ m ].types.split( "|" );
                        q = false;
                        for( k = 0; k < l.length; k++ ) {
                            if( !q ) {
                                n = o[ m ][ j ] instanceof window[ l[ k ] ] || typeof o[ m ][ j ] === l[ k ].toLowerCase();
                                if( o[ m ][ j ] === null && l[ k ] != "Null" ) {n = false}
                                if( n ) {q = true}
                            }
                        }
                        if( !q ) {throw"Error: Expected type " + l.join( " or " ) + " but got " + f( o[ m ][ j ] === null ? "null" : typeof o[ m ][ j ] ) + " for " + m + "'s items"}
                    }
                }
            }
        }
    };
    g.watch = function( n, j, s ) {
        var r = n[ j ], l = r, q = function() {return l}, m = function( p ) {
            r = l;
            return l = p === r ? p : s.call( n, j, r, p )
        };
        if( Object.defineProperty ) {
            Object.defineProperty( n, j, {
                get: q,
                set: m
            } )
        } else {
            if( Object.prototype.__defineGetter__ && Object.prototype.__defineSetter__ ) {
                Object.prototype.__defineGetter__.call( n, j, q );
                Object.prototype.__defineSetter__.call( n, j, m )
            }
        }
        if( g.isArray( n[ j ] ) ) {for( var o = 0; o < n[ j ].length; o++ ) {g.watch( n[ j ], o, s )}} else {if( g.isObject( n[ j ] ) ) {for( var k in n[ j ] ) {if( n[ j ].hasOwnProperty( k ) ) {g.watch( n[ j ], k, s )}}}}
    };
    g.unwatch = function( j, l ) {
        var k = j[ l ];
        delete j[ l ];
        j[ l ] = k
    };
    g.scrollParent = function( l ) {
        var k = l.css( "position" ), j = k === "absolute", m = l.prop( "nodeName" ) == "TEXTAREA" && l[ 0 ].scrollHeight - l.outerHeight() > 0 ? l : false;
        m = l.parents().filter( function() {
            var n = c( this );
            if( j && n.css( "position" ) === "static" ) {return false}
            return (/(auto|scroll)/).test( n.css( "overflow" ) + n.css( "overflow-y" ) + n.css( "overflow-x" ) ) && n[ 0 ].scrollHeight - n.outerHeight() > 0
        } ).eq( 0 );
        return k === "fixed" || !m.length ? c( l[ 0 ].ownerDocument || document ) : m
    };
    g.settings = {};
    g.api.set = function( l, n, k ) {
        var j;
        if( this.element.length ) {
            var o = this.get( l );
            if( k === false ? false : o && o.length ) {
                for( var m = 0; m < o.length; m++ ) {
                    if( typeof o[ m ] == "undefined" ) {
                        j = n( c( this.element[ m ] ) );
                        o[ m ] = j;
                        c( this.element[ m ] ).data( l, j )
                    }
                }
            }
            if( k === false ? true : !o ) {
                j = n( this.element );
                this.element.data( l, j );
                return j
            } else {return o}
        }
    };
    g.api.get = function( k ) {
        if( k.indexOf( "Fancy" ) != 0 ) {
            if( typeof this[ k ] == "function" ) {k = "Fancy" + k[ 0 ].toUpperCase() + k.slice( 1, k.length )} else {
                if( this.isChrome ) {console.error( '"%c' + k + '%c" is not a function of Fancy!', "color: blue", "color: #000" )} else {console.error( '"' + k + '" is not a function of Fancy!' )}
                return false
            }
        }
        if( this.element.length > 1 ) {
            var j = [];
            this.element.each( function() {j.push( c( this ).data( k ) )} );
            return j
        }
        return this.element.data( k )
    };
    g.api.fullHeight = function( k ) {
        var l = true, j = true;
        if( typeof k === "object" ) {
            l = k.padding != false;
            j = k.border != false
        }
        return this.element.height() + (l ? parseInt( this.element.css( "paddingTop" ) ) : 0) + (l ? parseInt( this.element.css( "paddingBottom" ) ) : 0) + (j ? parseInt( this.element.css( "borderBottomWidth" ) ) : 0) + (j ? parseInt( this.element.css( "borderTopWidth" ) ) : 0) + (k ? parseInt( this.element.css( "marginTop" ) ) + parseInt( this.element.css( "marginBottom" ) ) : 0)
    };
    g.api.fullWidth = function( k ) {
        var l = true, j = true;
        if( typeof k === "object" ) {
            l = k.padding != false;
            j = k.border != false
        }
        return this.element.width() + (l ? parseInt( this.element.css( "paddingLeft" ) ) : 0) + (l ? parseInt( this.element.css( "paddingRight" ) ) : 0) + (j ? parseInt( this.element.css( "borderLeftWidth" ) ) : 0) + (j ? parseInt( this.element.css( "borderRightWidth" ) ) : 0) + (k ? parseInt( this.element.css( "marginLeft" ) ) + parseInt( this.element.css( "marginRight" ) ) : 0)
    };
    g.getKey = function( p, n ) {
        n = n.replace( /\[(\w+)\]/g, ".$1" );
        n = n.replace( /^\./, "" );
        var j = n.split( "." );
        for( var m = 0; m < j.length; m++ ) {
            var l = j[ m ];
            if( p.hasOwnProperty( l ) ) {p = p[ l ]} else {return}
        }
        return p
    };
    window.Fancy = g;
    c( function() {g.version( g.api )} )
})( jQuery );