(function( g ) {
    if( typeof window.Fancy === "function" ) {
        console.error( "Error: tried to load Fancy more than once" );
        return
    }
    if( typeof jQuery != "function" ) {
        console.error( "jQuery * > 1.7 required" );
        return
    }
    var h = navigator.userAgent.toLowerCase();

    function f( i ) {
        if( this == window ) {return new f( i )}
        this.element = g( i );
        this.name = "Fancy"
    }

    f.findByAnd = function( l, k, i ) {
        function j() {
            var o = true, p = 0;
            while( p < this.length ) {
                o = true;
                for( var n in k ) {
                    if( k.hasOwnProperty( n ) ) {
                        if( (n.toLowerCase().indexOf( "date" ) >= 0 ? new Date( f.getKey( this[ p ], n ) ).getTime() : f.getKey( this[ p ], n )) != (n.toLowerCase().indexOf( "date" ) >= 0 ? new Date( k[ n ] ).getTime() : k[ n ]) ) {
                            o = false;
                            break
                        }
                    }
                }
                if( o == true ) {
                    o = p;
                    break
                }
                p++
            }
            o = (o === true || o === false) ? null : o;
            var m = o === null ? null : this[ o ];
            return i ? { index: o, result: m } : m
        }

        return j.apply( l )
    };
    f.findAllBy = function( i, k ) {
        function j() {
            var m = [], l = true;
            this.forEach( function( o ) {
                l = true;
                for( var n in k ) {if( k.hasOwnProperty( n ) ) {if( (n.toLowerCase().indexOf( "date" ) >= 0 ? new Date( f.getKey( this, n ) ).getTime() : f.getKey( this, n )) != (n.toLowerCase().indexOf( "date" ) >= 0 ? new Date( k[ n ] ).getTime() : k[ n ]) ) {l = false}}}
                if( l == true ) {m.push( o )}
            } );
            return m
        }

        return j.apply( i )
    };
    f.JSONvalid = function e( i ) {return i && /^[\],:{}\s]*$/.test( i.replace( /\\["\\\/bfnrtu]/g, "@" ).replace( /"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]" ).replace( /(?:^|:|,)(?:\s*\[)+/g, "" ) )};
    f.isObject = function a( i ) {return {}.toString.apply( i ) === "[object Object]"};
    f.isArray = function b( i ) {return Object.prototype.toString.call( i ) === "[object Array]"};
    f.capitalize = function d( i ) {return i[ 0 ].toUpperCase() + i.slice( 1 )};
    f.decapitalize = function c( i ) {return i[ 0 ].toLowerCase() + i.slice( 1 )};
    f.api = f.prototype = { version: "1.0.6", name: "Fancy" };
    f.isOpera = !!window.opera || navigator.userAgent.indexOf( " OPR/" ) >= 0;
    f.isFirefox = typeof InstallTrigger !== "undefined";
    f.isSafari = Object.prototype.toString.call( window.HTMLElement ).indexOf( "Constructor" ) > 0;
    f.isChrome = !!window.chrome && !this.isOpera;
    f.isIE = !!document.documentMode;
    f.apple = h.indexOf( "iphone" ) >= 0 || h.indexOf( "ipad" ) >= 0 || h.indexOf( "ipod" ) > 0;
    f.mobile = h.indexOf( "mobile" ) >= 0 || h.indexOf( "android" ) >= 0 || f.apple;
    f.versionControl = true;
    f.version = function( i ) {
        if( f.versionControl ) {
            if( f.isChrome ) {console.log( "%cThis page is using %c" + i.name + "%c\r\n Copyright \u00a9 %cMarkus Ahrweiler\r\n %cVersion: %c" + i.version, "color: #000", "color: #8E0000", "color: #000", "color: #49A54F", "color: #000", "color: blue" )} else {console.log( "This page is using " + i.name + "\r\n Copyright\u00a9 Markus Ahrweiler\r\n Version: " + i.version )}
            g.ajax( {
                url    : "http://version.mephiztopheles.wtf/",
                data   : { plugin: i.name },
                type   : "POST",
                global : false,
                success: function( j ) {if( j ) {if( f.compareversion( j, i.version ) ) {if( f.isChrome ) {console.warn( "%cYou are using an older version of %c" + i.name + ". %cThe newest version is: " + j, "color: #000", "color: #8E0000", "color: #000" )} else {console.warn( "You are using an older version of " + i.name + ". The newest version is: " + j )}}} else {if( f.isChrome ) {console.warn( "Couldn't retrieve version control information for %c" + i.name + "%c!", "color: #8E0000", "color. #000" )} else {console.warn( "Couldn't retrieve version control information for " + i.name + "!" )}}}
            } )
        }
    };
    f.require = function( i ) {
        g( function() {
            for( var k in i ) {
                if( i.hasOwnProperty( k ) ) {
                    var j;
                    if( k.indexOf( "Fancy." ) == 0 ) {j = f.getKey( window, k )} else {j = window[ k ].prototype.version || (k == "jQuery" ? jQuery.prototype.jquery : false)}
                    if( typeof window[ k ] == "undefined" || (j && i[ k ] && f.compareversion( i[ k ], j )) ) {throw"Error: " + k + " " + (i[ k ] ? i[ k ] + " " : "") + "is required" + (j ? ", got " + j : "")}
                }
            }
        } )
    };
    f.compareversion = function( j, i ) {
        var l = [ parseInt( j.split( "." )[ 0 ] ), parseInt( j.split( "." )[ 1 ] ), parseInt( j.split( "." )[ 2 ] ) ], k = [ parseInt( i.split( "." )[ 0 ] ), parseInt( i.split( "." )[ 1 ] ), parseInt( i.split( "." )[ 2 ] ) ];
        return l[ 0 ] > k[ 0 ] || (l[ 0 ] == k[ 0 ] && l[ 1 ] > k[ 1 ]) || (l[ 1 ] == k[ 1 ] && l[ 2 ] > k[ 2 ])
    };
    f.check = function( o, u ) {
        for( var m in u ) {
            if( u.hasOwnProperty( m ) ) {
                var q, l, k, n;
                if( u[ m ].type ) {
                    q = true;
                    l = u[ m ].type.split( "|" );
                    for( k = 0; k < l.length; k++ ) {
                        if( q ) {
                            n = o[ m ] instanceof window[ l[ k ] ] || typeof o[ m ] === l[ k ].toLowerCase();
                            if( n ) {q = false}
                        }
                    }
                    if( q ) {throw"Error: Expected type " + l.join( " or " ) + " but got " + d( typeof o[ m ] ) + " for " + m}
                }
                if( u[ m ].required ) {
                    q = false;
                    switch( typeof o[ m ] ) {
                        case"string":
                            if( !o[ m ] ) {q = true}
                            break;
                        case"object":
                            if( o[ m ] === null ) {q = true} else {if( !Object.keys( o[ m ] ).length ) {q = true}}
                            break;
                        case"undefined":
                            q = true;
                            break
                    }
                    if( q ) {throw"Error: " + m + " is required"}
                }
                if( u[ m ].types && o[ m ] && o[ m ].length ) {
                    for( var j = 0; j < o[ m ].length; j++ ) {
                        l = u[ m ].types.split( "|" );
                        q = false;
                        for( k = 0; k < l.length; k++ ) {
                            if( !q ) {
                                n = o[ m ][ j ] instanceof window[ l[ k ] ] || typeof o[ m ][ j ] === l[ k ].toLowerCase();
                                if( o[ m ][ j ] === null && l[ k ] != "Null" ) {n = false}
                                if( n ) {q = true}
                            }
                        }
                        if( !q ) {throw"Error: Expected type " + l.join( " or " ) + " but got " + d( o[ m ][ j ] === null ? "null" : typeof o[ m ][ j ] ) + " for " + m + "'s items"}
                    }
                }
            }
        }
    };
    f.watch = function( n, j, s ) {
        var r = n[ j ], l = r, q = function() {return l}, m = function( i ) {
            r = l;
            return l = i === r ? i : s.call( n, j, r, i )
        };
        if( Object.defineProperty ) {
            Object.defineProperty( n, j, {
                get: q,
                set: m
            } )
        } else {
            if( Object.prototype.__defineGetter__ && Object.prototype.__defineSetter__ ) {
                Object.prototype.__defineGetter__.call( n, j, q );
                Object.prototype.__defineSetter__.call( n, j, m )
            }
        }
        if( f.isArray( n[ j ] ) ) {for( var o = 0; o < n[ j ].length; o++ ) {f.watch( n[ j ], o, s )}} else {if( f.isObject( n[ j ] ) ) {for( var k in n[ j ] ) {if( n[ j ].hasOwnProperty( k ) ) {f.watch( n[ j ], k, s )}}}}
    };
    f.unwatch = function( i, k ) {
        var j = i[ k ];
        delete i[ k ];
        i[ k ] = j
    };
    f.scrollParent = function( k ) {
        var j = k.css( "position" ), i = j === "absolute", l = k.prop( "nodeName" ) == "TEXTAREA" && k[ 0 ].scrollHeight - k.outerHeight() > 0 ? k : false;
        l = k.parents().filter( function() {
            var m = g( this );
            if( i && m.css( "position" ) === "static" ) {return false}
            return (/(auto|scroll)/).test( m.css( "overflow" ) + m.css( "overflow-y" ) + m.css( "overflow-x" ) ) && m[ 0 ].scrollHeight - m.outerHeight() > 0
        } ).eq( 0 );
        return j === "fixed" || !l.length ? g( k[ 0 ].ownerDocument || document ) : l
    };
    f.settings = {};
    f.api.set = function( l, n, k ) {
        var j;
        if( this.element.length ) {
            var o = this.get( l );
            if( k === false ? false : o && o.length ) {
                for( var m = 0; m < o.length; m++ ) {
                    if( typeof o[ m ] == "undefined" ) {
                        j = n( g( this.element[ m ] ) );
                        o[ m ] = j;
                        g( this.element[ m ] ).data( l, j )
                    }
                }
            }
            if( k === false ? true : !o ) {
                j = n( this.element );
                this.element.data( l, j );
                return j
            } else {return o}
        }
    };
    f.api.get = function( j ) {
        if( j.indexOf( "Fancy" ) != 0 ) {
            if( typeof this[ j ] == "function" ) {j = "Fancy" + j[ 0 ].toUpperCase() + j.slice( 1, j.length )} else {
                if( this.isChrome ) {console.error( '"%c' + j + '%c" is not a function of Fancy!', "color: blue", "color: #000" )} else {console.error( '"' + j + '" is not a function of Fancy!' )}
                return false
            }
        }
        if( this.element.length > 1 ) {
            var i = [];
            this.element.each( function() {i.push( g( this ).data( j ) )} );
            return i
        }
        return this.element.data( j )
    };
    f.api.fullHeight = function( j ) {
        var k = true, i = true;
        if( typeof j === "object" ) {
            k = j.padding != false;
            i = j.border != false
        }
        return this.element.height() + (k ? parseInt( this.element.css( "paddingTop" ) ) : 0) + (k ? parseInt( this.element.css( "paddingBottom" ) ) : 0) + (i ? parseInt( this.element.css( "borderBottomWidth" ) ) : 0) + (i ? parseInt( this.element.css( "borderTopWidth" ) ) : 0) + (j ? parseInt( this.element.css( "marginTop" ) ) + parseInt( this.element.css( "marginBottom" ) ) : 0)
    };
    f.api.fullWidth = function( j ) {
        var k = true, i = true;
        if( typeof j === "object" ) {
            k = j.padding != false;
            i = j.border != false
        }
        return this.element.width() + (k ? parseInt( this.element.css( "paddingLeft" ) ) : 0) + (k ? parseInt( this.element.css( "paddingRight" ) ) : 0) + (i ? parseInt( this.element.css( "borderLeftWidth" ) ) : 0) + (i ? parseInt( this.element.css( "borderRightWidth" ) ) : 0) + (j ? parseInt( this.element.css( "marginLeft" ) ) + parseInt( this.element.css( "marginRight" ) ) : 0)
    };
    f.getKey = function( p, n ) {
        n = n.replace( /\[(\w+)\]/g, ".$1" );
        n = n.replace( /^\./, "" );
        var j = n.split( "." );
        for( var m = 0; m < j.length; m++ ) {
            var l = j[ m ];
            if( p.hasOwnProperty( l ) ) {p = p[ l ]} else {return}
        }
        return p
    };
    window.Fancy = f;
    g( function() {f.version( f.api )} )
})( jQuery );