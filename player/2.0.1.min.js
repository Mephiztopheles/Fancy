!function(e,t){function l(e){return e.on("selectstart",!1).attr("unselectable","on").css("userSelect","none")}function n(e){var t=[],l=parseInt(e/3600),n=parseInt((e-3600*l)/60),r=Math.floor(e-(3600*l+60*n));return l&&t.push(10>l?"0"+l:l),t.push(10>n?"0"+n:n),t.push(10>r?"0"+r:r),t.join(":")}function r(e){t(document).trigger(e)}function i(e,t){return t=t?"-"+t+"-":"-",e.attr("id",a+t+s).addClass(a+t.substring(0,t.length-1))}function u(e){for(var t=[],l=1;l<arguments.length;l++)t.push(arguments[l]);return t.forEach(function(t){e.addClass(a+"-"+t)}),e}function m(e){for(var t=[],l=1;l<arguments.length;l++)t.push(arguments[l]);return t.forEach(function(t){e.removeClass(a+"-"+t)}),e}function o(e,n){var o=this;o.id=s,o.name=a,o.version="2.0.1",o.element=e[0],o.element.controls=!1,e.on("ended",function(){m(o.html.wrapper,"played","paused"),u(o.html.wrapper,"ended"),o.update(!0);var e={type:"FancyPlayer:ended",player:o.element,api:o,id:o.id};r(e),o.onEnd()}).on("pause",function(){o.update(!0),clearInterval(d.played),u(o.html.wrapper,"paused"),m(o.html.wrapper,"played","ended");var e=new t.Event({type:"FancyPlayer:pause",player:o.element,api:o,id:o.id});r(e),o.html.timeSliderCurrent.stop(!0),o.html.timeSliderBuffer.stop(!0),o.onPause()}).on("play",function(){u(o.html.wrapper,"played"),m(o.html.wrapper,"paused","ended");var e={type:"FancyPlayer:play",player:o.element,api:o,id:o.id};r(e),o.update(),d.played=setInterval(function(){o.update()},1e3),o.onPlay()}).on("volumechange",function(){function e(e){o.html.volumeSliderCurrent.css(o.html.volumeSliderFull.height()>o.html.volumeSliderFull.width()?{top:100-e+"%"}:{width:e+"%"})}console.log("change volume"),o.volume=100*o.element.volume,o.element.muted||0===o.volume?(u(o.html.wrapper,"muted"),e(0)):(m(o.html.wrapper,"muted"),e(o.volume));var t={type:"FancyPlayer:volume",player:o.element,api:o,id:o.id};r(t),o.onVolume()}).on("contextmenu",function(e){return e.preventDefault(),!1}).on("click",function(){o.toggle()}).on("dblclick",function(){o.fullscreen()}),o.onEnd=function(){},o.onPlay=function(){},o.onPause=function(){},o.onVolume=function(){},o.settings=t.extend({},Fancy.settings[a],n),o.html={wrapper:u(i(t("<div/>")),"theme-"+o.settings.theme),controls:i(t("<div/>"),"controls"),left:i(t("<div/>"),"controls-left"),right:i(t("<div/>"),"controls-right"),play:u(i(t("<div/>"),"play"),"control"),fullscreen:u(i(t("<div/>"),"fullscreen"),"control"),timeCurrent:i(t("<div/>"),"time-current"),timeFull:i(t("<div/>"),"time-full"),timeSlider:i(t("<div/>"),"time-slider"),timeSliderCurrent:i(t("<div/>"),"time-slider-current"),timeSliderBuffer:i(t("<div/>"),"time-slider-buffer"),timeSliderFull:i(t("<div/>"),"time-slider-full"),volume:i(t("<div/>"),"volume"),volumeSlider:i(t("<div/>"),"volume-slider"),volumeSliderCurrent:i(t("<div/>"),"volume-slider-current"),volumeSliderFull:i(t("<div/>"),"volume-slider-full"),mute:u(i(t("<div/>"),"volume-mute"),"control")},e.wrap(o.html.wrapper),o.html.wrapper=e.parent(),o.html.wrapper.append(o.html.controls),o.html.controls.append(o.html.left),o.html.left.append(o.html.play),o.html.left.append(o.html.timeCurrent),o.html.left.append(o.html.timeFull),o.html.controls.append(o.html.timeSlider),o.html.controls.append(o.html.right),o.html.right.append(o.html.volume),o.html.right.append(o.html.fullscreen),o.html.timeSlider.append(o.html.timeSliderFull),o.html.timeSliderFull.append(o.html.timeSliderBuffer),o.html.timeSliderFull.append(o.html.timeSliderCurrent),o.html.volume.append(o.html.mute),o.html.volume.append(o.html.volumeSlider),o.html.volumeSlider.append(o.html.volumeSliderFull),o.html.volumeSliderFull.append(o.html.volumeSliderCurrent),h||(h=!0,Fancy.version(o)),o.duration=0,o.volume=o.element.volume,o.muted=o.element.muted,o.settings.start&&(o.seek(o.settings.start),o.html.timerSliderCurrent.css("marginLeft",o.settings.start),o.html.timeSliderBuffer.css("marginLeft",o.settings.start)),o.play(),o.settings.autoplay||o.pause(),o.eventListener(),l(o.html.wrapper),e.data(a,o);var c=e.height(),p=e.height(),f=c/p,v=screen.height/screen.width;return console.log(f,v),screen.width>screen.height?e.width(100-p/screen.width*100+"%"):e.height(100-c/screen.height*100+"%"),o}if("undefined"==typeof Fancy)return void console.error("Fancy is required");var s=1,a="FancyPlayer",d=[],h=!1;o.api=o.prototype={},o.api.pause=function(){return this.element.pause(),this},o.api.play=function(){return this.element.ended?(this.reset(),this.play()):this.element.play(),this},o.api.seek=function(e){var t=this;return clearTimeout(d.seek),d.seek=setInterval(function(){4==t.element.readyState&&(clearTimeout(d.seek),t.element.currentTime=e,t.update(!0))},10),t},o.api.update=function(e){var t=this;return t.currentTime=t.element.currentTime,t.duration=t.element.duration||0,e?t.html.timeSliderCurrent.stop(!0).width((t.currentTime-t.settings.start)/t.duration*100+"%"):4==t.element.readyState&&(t.buffered=[t.element.buffered.start(0),t.element.buffered.end(0)],t.played=[t.settings.start,t.element.currentTime],t.html.timeSliderCurrent.animate({width:(t.currentTime+1-t.settings.start)/t.duration*100+"%"},1e3,"linear"),t.html.timeSliderBuffer.animate({width:(t.buffered[1]-t.settings.start)/t.duration*100+"%"},1e3,"linear")),t.html.timeFull.html(n(t.duration)),t.html.timeCurrent.html(n(t.currentTime)),this},o.api.toggle=function(){var e=this;return e.element.paused?e.play():e.pause(),this},o.api.eventListener=function(){var e=this;return e.html.play.on("click",function(){e.toggle()}),e.html.fullscreen.on("click",function(){e.fullscreen()}),e.html.mute.on("click",function(){e.element.muted=!e.element.muted,e.muted=e.element.muted}),e.html.timeSlider.on("click",function(t){e.seek(e.element.duration*t.offsetX/e.html.timeSlider.width()),e.update(!0)}),e.html.volumeSliderFull.on("click",function(t){e.setVolume(e.html.volumeSliderFull.height()>e.html.volumeSliderFull.width()?(e.html.volumeSliderFull.height()-t.offsetY)/e.html.volumeSliderFull.height()*100:100*t.offsetX/e.html.volumeSliderFull.width())}),e.html.wrapper.on("mousemove",function(){e.showControls(),clearTimeout(d.hover),d.hover=setTimeout(function(){t("#"+e.html.controls.attr("id")+":hover").length||e.hideControls()},1500)}),Fancy.swipe&&(Fancy(e.html.volumeSliderFull).swipe({onMouseMove:function(l){if(t(l.target).is(e.html.volumeSliderFull)||t(l.target).is(e.html.volumeSliderCurrent)||t(l.target).is(e.html.volumeSlider))if(e.html.volumeSliderFull.height()>e.html.volumeSliderFull.width()){var n=(e.html.volumeSliderFull.height()-l.offsetY)/e.html.volumeSliderFull.height()*100;n=n>100?100:0>n?0:n,e.setVolume(n)}else{var n=100*l.offsetX/e.html.volumeSliderFull.width();n=n>100?100:0>n?0:n,e.setVolume(n)}else{var r={top:l.pageY,left:l.pageX},i=e.html.volumeSliderFull.offset();e.html.volumeSliderFull.height()>e.html.volumeSliderFull.width()?r.top>i.top?e.setVolume(100):r.top<i.top&&e.setVolume(0):r.left>i.left?e.setVolume(100):r.left<i.left&&e.setVolume(0)}}}),Fancy(e.html.timeSlider).swipe({onMouseMove:function(t){e.seek(e.element.duration*t.offsetX/e.html.timeSlider.width()),e.update(!0)}})),t(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?u(e.html.wrapper,"fullscreen"):m(e.html.wrapper,"fullscreen")}),this},o.api.fullscreen=function(e){if(e&&"toggle"!==e||(e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?"leave":"enter"),"enter"===e){var t=this.html.wrapper[0];t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}else"leave"===e?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():console.error("Mode "+e+" not supported");return this},o.api.setVolume=function(e){return"number"==typeof e&&(this.element.muted=!1,this.element.volume=e/100),this},o.api.reset=function(){return this.element.load(),this.seek(this.settings.start),this.html.timeSliderCurrent.width(0),this},o.api.showControls=function(){u(this.html.wrapper,"controls-show")},o.api.hideControls=function(){m(this.html.wrapper,"controls-show")},Fancy.settings[a]={autoplay:!1,start:0,theme:"default"},Fancy.player=!0,Fancy.api.player=function(e){var t=this.get(a);if(t&&t.length)for(var l in t)"undefined"==typeof t[l]&&(t[l]=new o(this.element[l],e));return t?t:new o(this.element,e)}}(window,jQuery);