!function(e,n){function t(e,t){var o=this;o.name=i,o.id=a,o.element=e,o.settings=n.extend({},Fancy.settings[i],t),s||(s=!0,Fancy.version(o)),this.init(),a++}if("function"==typeof n){if("undefined"==typeof Fancy)return void console.error("Fancy is required");var i="FancyMenu",a=0,s=!1;t.api=t.prototype={},t.api.version="2.0.3",t.api.init=function(){var e=this;e.createMenu(),e.element.addClass(this.name+"-trigger"),e.element.data(i,e),e.element.on("contextmenu."+i+"-"+e.id,function(n){e.onOpen(n),n.preventDefault(),n.stopPropagation()});var n,t=1e3;e.element.on("touchstart."+i+"-"+e.id,function(i){n=setTimeout(function(){e.onOpen(i)},t),i.preventDefault()}),e.element.on("touchend."+i+"-"+e.id,function(){n&&clearTimeout(n)})},t.api.createMenu=function(){var e=this,t=n("<div/>",{id:i+"-wrapper"}).attr("unselectable","on").css("user-select","none").on("selectstart",!1),a=n("<div/>",{id:i+"-inner"}),s=n("<ul/>",{id:i+"-menu"});t.append(a.append(s));for(var o=0;o<e.settings.menu.length;o++){var u=e.settings.menu[o],c=n("<li/>",{id:i+"-menu-"+o,"class":i+"-menu-element"}).data("name",o);c.append(n("<span/>",{id:i+"-menu-"+o+"-icon","class":i+"-menu-icon "+u.icon})),c.append(n("<span/>",{id:i+"-menu-"+o+"-text","class":i+"-menu-text",html:u.title||u.name||o})),s.append(c)}this.menu=t},t.api.onOpen=function(e){var t=this;this.close(),this.createMenu(),n("body").append(this.menu),n("."+i+"-menu-element").on("click",function(e){var i=n(this).data("name");t.settings.menu[i].click&&t.settings.menu[i].click.call(t,e,i,n(this))}),n(document).on("mousedown."+i+"-"+t.id+" touchstart."+i+"-"+t.id,function(e){n(e.target).is(t.menu)||n(e.target).closest(t.menu).length||t.close()});var a=e.pageX||e.originalEvent.touches[0].pageX,s=e.pageY||e.originalEvent.touches[0].pageY;this.menu.css({left:a+10,top:s+10})},t.api.close=function(){this.menu.remove(),n(document).unbind("."+i+"-"+this.id),this.settings.onClose.call(this)},Fancy.menu=!0,Fancy.settings[i]={menu:{},onClose:function(){}},Fancy.api.menu=function(e){var n=this.get(i);if(n&&n.length)for(var a=0;a<n.length;a++)"undefined"==typeof n[a]&&(n[a]=new t(this.element[a],e));return n?n:new t(this.element,e)}}}(window,jQuery);
